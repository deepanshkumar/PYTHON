import requests
import json

# Cymulate API endpoint and credentials
api_url = "https://api.cymulate.com/api/"
api_key = "your_api_key_here"

# Function to make a POST request to the Cymulate API
def cymulate_post(endpoint, data=None):
    headers = {
        "Content-Type": "application/json",
        "Authorization": f"Bearer {api_key}"
    }
    response = requests.post(api_url + endpoint, headers=headers, json=data)
    return response.json()

# Immediate Threat Assessment launch parameters
assessment_launch_params = {
    "target": "example.com",
    "payload_type": "ransomware",
    # Add other required parameters as needed
}

# Launch Immediate Threat Assessment
try:
    response = cymulate_post("assessments/immediate/launch", data=assessment_launch_params)

    if response.get("success"):
        # Successful response
        assessment_id = response.get("data", {}).get("assessment_id")
        print(f"Immediate Threat Assessment launched successfully. Assessment ID: {assessment_id}")
    else:
        # Error response
        error_message = response.get("error", {}).get("message", "Unknown error")
        print(f"Error: {error_message}")

except Exception as e:
    print(f"Error during Immediate Threat Assessment launch: {str(e)}")
